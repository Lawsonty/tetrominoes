<!DOCTYPE html>
<meta charset="UTF-8" />
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/5.4.0/math.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" type="text/javascript"></script>
    <script src="js/multi.js" type="text/javascript"></script>
    <script src="js/tetris.js" type="text/javascript"></script>
    <link rel="stylesheet" href="/public/index.css">
</head>
<html>

<body>
    <div class=board id="oppBoard"></div>

    <script>
        var tickCount = 0;
        var intervalObj = null;

        function boardUpdate() {
            var updateHTML = "";
            var blockColor = "";

            for (var i = state.free_blocks.length - 1; i >= 0; i--) {
                updateHTML += `<span class=row>`
                for (var j = 0; j < state.free_blocks[i].length; j++) {
                    if (state.free_blocks[i][j][1] == null) {
                        updateHTML += `<span class=block>&nbsp;</span>`;
                    } else {
                        updateHTML += `<span class=block style="background-color:${state.free_blocks[i][j][1]}">&nbsp;</span>`;
                    }
                    updateHTML += "</span>";
                }
                updateHTML += "<br>";
            }
            document.getElementById("oppBoard").innerHTML = updateHTML;
        }

        function myFunction() {
            if (tickCount % 10 == 0) {
                state.tick();
            }
            boardUpdate();
            //state.clear_rows()
            tickCount++;
        }

        boardUpdate();

        onPageLoaded(document.getElementById('oppBoard'));
    </script>
</body>

</html>